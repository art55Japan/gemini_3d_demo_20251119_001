英名: ExtensionGuide.md

# Extension Guide

新しい機能やエンティティを追加する際のチェックリストです。

## エンティティ追加
- `Entity` を継承し、`type` と `mesh` を設定。
- 振る舞い: `update(delta,input,time,collidables,entities)` を実装。
- 永続化したい場合: `isSaveable/toSaveData/fromSaveData` を実装。生成時に `EntityManager.add` し、物理対象なら `collidables` に登録。
- 衝突/AI: AABBで十分なら`collidables`利用。特殊衝突は個別実装。

## システム追加
- 責務を分離し、小さなクラスとして作成（例: Audio拡張、UI管理、クエスト管理）。
- 更新が必要なら `Game.render` で呼び出す順序を明示。入力依存なら `Input` のStateにフィールドを追加。

## UI/UX
- DOMオーバーレイは`SaveLoadUI`に倣い、表示中はゲーム更新を一時停止するか検討。
- VRセッション中の操作を阻害しないよう、クリック開始やキーボードフォーカスに注意。

## テスト
- `src/__tests__` に `<Name>.test.js` を追加。jsdomでDOMやAudioをスタブ。
- 新しい保存対象を追加したら、`toSaveData/fromSaveData` の往復テストを作成。

## ドキュメント
- コマンドや操作が変わった場合は `Process/Build_Test.md` と `Gameplay/Controls.md` を更新。
- 保存形式やエンティティが増えたら `Architecture/DataModel.md` と `Gameplay/Entities.md` を更新。

