英名: Performance.md

# Performance Guidelines

- 描画
  - 必要な場合のみシャドウを有効化。ライト数を抑え、影のmapサイズを小さめに（例: 1024）。
  - 不要なマテリアル更新/ジオメトリ生成をループ内で行わない。
- 物理/衝突
  - `collidables` を小さく保つ（動的ブロック追加が多い場合は上限検討）。
  - Raycastはビルドモード時のみ実行。マウス移動がない場合は再計算をスキップする検討余地。
- エンティティ
  - `EntityManager.update` は配列走査。大量追加時はLODやアクティブ半径の導入を検討。
  - Slime等AIは距離閾値で早期returnし、重い処理を避ける。
- オーディオ
  - 効果音はキャッシュ再生し、同時再生数を制限。
- メモリ
  - `localStorage` は容量上限あり。古いスロットの定期削除や圧縮を検討（未実装）。
- 計測
  - DevToolsのPerformance/Memory、Three.jsインスペクタ等でフレームタイムを確認。60fps維持を目標。

