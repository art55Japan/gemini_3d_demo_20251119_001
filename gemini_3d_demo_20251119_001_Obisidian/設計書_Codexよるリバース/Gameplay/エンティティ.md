英名: Entities.md

# Entities

## 基本方針
- すべて `Entity` 継承。`update` / `handleCollision` / `isSaveable` / `toSaveData` / `fromSaveData` を必要に応じて実装。
- `EntityManager` が毎フレーム `update` を呼び、`shouldRemove` が立ったものを除去。

## 主なエンティティ
- **Player**: 物理/戦闘/衝突をコンポーネント分割。セーブ対象外（プレイヤー状態は `SaveManager` が直接保存）。
- **Block**: 座標とタイプを持つ保存対象ブロック。`BuildSystem` で設置/削除。`Block.fromSaveData` で再生成。
- **Tree/Rock**: 観賞・障害物。Rockのみ衝突対象に追加。
- **Slime**: 敵。プレイヤーとの距離で行動し、`takeDamage` 実装で撃破→消去。保存対象。

## 拡張の指針
- 新規エンティティを作る場合、`type` と `mesh` をセットし、`update` で振る舞いを記述。保存したい場合は `isSaveable` とシリアライズ/デシリアライズを実装。
- 衝突判定が必要なら、`collidables` にMeshを登録し、`PlayerPhysics.checkCollisions` でAABB判定を使う。

