英名: Systems.md

# Systems

主要システムと責務の一覧。

- **Game**: 三次元シーン、入力、更新ループを統括。セーブ/ロードUIの表示・通知も管理。
- **Input**: キー/マウス/VRコントローラから抽象化したStateを生成（移動・ジャンプ・攻撃・ビルド・セーブ/ロード等）。
- **EntityManager**: すべてのエンティティを登録・更新・破棄。`isSaveable` を持つものをセーブ対象にできる。
- **Player**: `PlayerPhysics`(移動/重力/衝突), `PlayerCombat`(ステートマシンによる攻撃), `PlayerCollision`(被弾/ノックバック)で構成。
- **WorldManager**: Tree/Rock/Slime をランダム生成し、Rockを `collidables` へ追加。
- **BuildSystem**: Raycastでマウス位置を取得し、`Block` の設置/削除を行う。ゴーストブロックでスナップ位置を表示。
- **CameraManager**: プレイヤー追従と視点切替（VR/通常）。`resize` でアスペクトを更新。
- **AudioManager**: BGMと効果音の再生/ミュート/Resume。攻撃・ジャンプ・敵撃破などのフックを提供。
- **SaveManager**: Player状態、`Block`/`Slime` のセーブ/ロード（`localStorage`）。クイックセーブ/ロードとスロット保存に対応。
- **SaveLoadUI**: ブラウザUIでスロット選択と削除を提供。表示中はゲーム更新を一時停止。
- **Block/Tree/Rock/Slime**: `Entity` を継承。`Block`/`Slime` は `isSaveable` を実装し、`toSaveData/fromSaveData` で永続化。

