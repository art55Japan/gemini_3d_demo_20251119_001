英名: DataModel.md

# Data Model (Save)

セーブデータのJSON構造（`localStorage` 保存）。

## ルート構造
```json
{
  "timestamp": 1730000000000,
  "summary": "Quick Save at 12:34:56",
  "player": { "position": [0,0,0], "rotation": 0 },
  "blocks": [ { /* block data */ } ],
  "enemies": [ { /* slime data */ } ]
}
```

## Player
- `position`: `[x,y,z]`
- `rotation`: Y軸ラジアン

## Block (type "block")
- 生成: `Block.toSaveData()`
- 形式: `{ "type": "block", "blockType": "dirt|stone_dark|...", "position": [x,y,z] }`

## Slime (type "slime")
- 生成: `Slime.toSaveData()`
- 形式: `{ "type": "slime", "position": [x,y,z], "health": number }`

## スロットキー
- クイック: `gemini_3d_quick_save`
- スロット: `gemini_3d_save_<slotId>`

## 処理フロー
- 保存: `SaveManager._createSaveData` が Player＋`isSaveable` なエンティティを収集 → JSON → `localStorage.setItem`
- 復元: JSON parse → 保存対象エンティティのみ削除 → `fromSaveData` で再生成 → 必要なら `collidables` に再登録

## 注意
- `localStorage` はブラウザごと・容量制限あり。共有/大容量は未対応。
- 保存対象を増やす場合は `isSaveable/toSaveData/fromSaveData` を実装し、物理対象なら `collidables` へ登録。

